var _hyperapp = require("hyperapp");
var _hyperappFx = require("hyperapp-fx");
var _html = require("./html");
var _parcelHelpers = require("@parcel/transformer-js/lib/esmodule-helpers.js");
var _htmlDefault = _parcelHelpers.interopDefault(_html);
const {main, input, button, h3} = _htmlDefault.default;
const SuccessResponse = (state, response) => ({
  ...state,
  response,
  error: null,
  fetching: false
});
const ErrorResponse = (state, error) => ({
  ...state,
  response: null,
  error,
  fetching: false
});
const SendHttp = state => [{
  ...state,
  response: "...",
  error: null,
  fetching: true
}, _hyperappFx.Http({
  url: state.url,
  response: "text",
  action: SuccessResponse,
  error: ErrorResponse
})];
const UpdateUrl = (state, {target: {value}}) => ({
  ...state,
  url: value
});
_hyperapp.app({
  init: {
    response: null,
    error: null,
    url: "https://httpstat.us/200",
    fetching: false
  },
  view: ({response, error, url, fetching}) => main(input({
    autofocus: true,
    value: url,
    disabled: fetching,
    oninput: UpdateUrl
  }), button({
    onclick: SendHttp
  }, "Send"), h3(`Response: ${response}`), h3(`Error: ${error && (error.statusText || error.message)}`)),
  node: document.getElementById("app")
});
